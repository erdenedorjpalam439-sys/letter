<!DOCTYPE html>

<html lang="mn">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Artisanal Wax Stamp Letter</title>

    <!-- Dependencies -->

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>

    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

   

    <!-- Fonts -->

    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

   

    <style>

        :root {

            --bg-stone: #1c1917;

            --paper: #fdfcf9;

        }



        body {

            margin: 0;

            padding: 0;

            background-color: var(--bg-stone);

            font-family: 'Crimson Pro', serif;

            overflow: hidden;

            user-select: none;

            -webkit-user-select: none;

            touch-action: none;

        }



        .paper-texture {

            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');

        }



        @keyframes softWiggle {

            0%, 100% { transform: rotate(0deg); }

            25% { transform: rotate(0.6deg); }

            75% { transform: rotate(-0.6deg); }

        }



        .animate-soft-wiggle {

            animation: softWiggle 3s ease-in-out infinite;

        }



        /* Custom Scrollbar */

        .custom-scrollbar::-webkit-scrollbar {

            width: 4px;

        }

        .custom-scrollbar::-webkit-scrollbar-track {

            background: transparent;

        }

        .custom-scrollbar::-webkit-scrollbar-thumb {

            background: #d6d3d1;

            border-radius: 10px;

        }



        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(10px); }

            to { opacity: 1; transform: translateY(0); }

        }

       

        .page-enter {

            animation: fadeIn 0.8s ease-out forwards;

        }



        .no-tap-highlight {

            -webkit-tap-highlight-color: transparent;

            -webkit-touch-callout: none;

        }



        .progress-ring {

            transition: stroke-dashoffset 0.1s linear;

        }

    </style>

</head>

<body>

    <div id="root"></div>



    <script>

        const { useState, useEffect, useRef, createElement: h } = React;



        const App = () => {

            const [isCompleted, setIsCompleted] = useState(false);

            const [isSealPopped, setIsSealPopped] = useState(false);

            const [isOpen, setIsOpen] = useState(false);

            const [showLetter, setShowLetter] = useState(false);

            const [isSettled, setIsSettled] = useState(false);

            const [holdProgress, setHoldProgress] = useState(0);

            const [particles, setParticles] = useState([]);

           

            const sealStateRef = useRef({

                x: 0, y: 0, rotation: 0, vx: 0, vy: 0, torque: 0,

                holding: false, progress: 0

            });

            const sealElementRef = useRef(null);

            const physicsRef = useRef();

            const lastTimeRef = useRef(performance.now());



            const letterContent = [

                `Хамгийн эхлээд хайрт чамаасаа уучлалт хүсье, бас баярласан сэтгэлээ илэрхийлье. Анх 2023 оны өвөл чамайг Хайраа багшийн олимпиадын бэлтгэл дээр харж байлаа, тэр үедээ орос англи хэлэнд аль алинд нь сайн байсан болохоор чинь атаархаж бас өрсөлдөгчөө гэж харж байсан.`,

                `Тэгээд дүүргийн олимпиадын дүн гараад өөрийнхийгөө чинийхтэй харьцуулж харчихаад… яг юу гэж бодсоноо үнэндээ санахгүй байнаа… мэдээж битүүхэндээ атархааж л байсан байх. Тэгээд улсын олимпиад дээр чамайг ганцаараа сургуулийн гадаа хүлээгээд сууж байхыг чинь хараад жаахан санаа зовж байсан…`,

                `Тэгээд хичээл ороод Хайраа багшийн давтлагад нь туслах багш хийж байхдаа, 9-ийн и-ийн хүүхдүүд гэж мэдээд чамайг суухгүй юм байх даа гэж нэлээд хүсэж хүлээж байсан… үнэндээ жаахан smug царайлъя гэж бодсон л доо, гэхдээ чиний тухай мэдэхийг бас хүссэн.`,

                `Тэгээд хичээлийн шинэ жил дуусч хонхны баяр болов оо, сургууль дээр болсон нээлт ч гэх үү хаалтан дээр чамайг анзаарч хараагүй ч гэсэн орой/өдөр нь шагнал гардуулж байхал нь чамайг, үнэндээ хальт л даа, гэхдээ л харж байсан.`,

                `Дараа нь дуу хуур, бүжиг цэнгүүн дуусаад тэр хавиар хийцгүйрч явж байгаад заал руу нь орсон чинь танай ангийнхан ангиараа зургаа авахуулж байхад нь таараад, чамайг одооо бодох нь ээ, юу өмссөн байсныг чинь бүдэг бадаг л санадаг ч гэсэн хөөрхөн харагдаж байсныг чинь тод санадаг л даа.`,

                `Тэгээд 10-р анги эхэлж чамайг ангид байгааг мэдээд бага багаар ажиглаж эхэлсэн… өрсөлдөгч гэж харсаар бусад хичээлдээ ч сайн гэдгийг чинь, ялангуяа Одгэ багшийн хичээл дээр “Чинхүслээн” гээд л багш чамайг дуудаад эссэг чинь магтаж, засаж өгөөд л...`,

                `Харин чамтайгаа анх удаагаа ярилцаж үзсэн нь энэ зун 7-р сарын 4-нд, ээж хагалгааны өрөө рүүгээ орчихоор нь гадаа нь хүлээж суунгаа чиний messenger дээрх note рүү чинь language гэж хариулаад, тэр л ганцхан үгнээс эхлээд нэг цаг хагас хэрийн туршид их хөгжилтэй бас их сэтгэлд хоногшсон яриа өрнүүлж билээ.`,

                `Ээж ч эмнэлгээсээ гараад, гэртээ хариад яагаад ч юм чамтай дахин дахин ярилцахын хүслэн болсоор нэгэн аргыг сэдэв ээ. Чамаар зураг зуруулах нэрийдлээр... зураг зуруулахын л тулд шүү... мэдээж чамтайгаа дахин дахин ярилцахыг хүссэндээ л.`,

                `Чамтайгаа үерхэж эхлээд гомдоохгүй юм сан, алдчихгүй юм сан гэж айсаар алдаа гаргаад тэдгээрийгэа мэдсэн ч засаж чадалгүй, тэр хэвээр нь байлгасаар, чамайгаа улам гомдоосноо мэдэлгүй хоосон амлалт өгсөөр хэтэрхий… бүр хэтэрхий уджээ. Нэгэн хэвийн, засагдаагүй алдаануудаа олсон, юуг буруу хийж байснаа ойлгосон, яаж чамайгаа хайрлах ёстойгоо ойлгосон.`,

                `Хайр нь болоогүй зүйлсийн тухай бодсоор, бодох бодохдоо харанхуй талаас нь хэт ургуулж бодсоор “одоо”-оо сүйрүүлжээ. Иймээс хайр нь болоогүй ирээдүйд биш зөвхөн чамдаа анхаарч, сэтгэл зүйгээ ч бас тогтвортой байлганаа. Миний хайр хүсээгүй байхад нь заримдаа хэт их тулгаж шахдгаа ч мөн засна аа.`,

                `Хэдийгээр хэн хэнийхээ гаргасан алдаа, тэдгээрийг яаж засах тухай гэсэн ч гэлээ, чинийхээ гаргасан үйлдэл болгоныг шалтгаантай гэж бодож байгаа болохоор... хэрвээ бичихгүй бол яг буцаагдах байх аа... Бага багаар зайгаа авахын оронд юу бодож байгаагаа хэлсэн бол...`,

                `Тэгээд хайраасаа, чамаасаа энэ хүсэлтийг, саналыг дахин гуйя.\n\nХүслээ, намайг чиний найз залуу болохыг зөвшөөрч байна уу?\n\nӨхөөрдөм чинийхээ инээмсэглэлийг дахин харахын тулд, ялдам зөөлөн хоолойг чинь дахин сонсохын тулд, чамайгаа дахин тэврэхийн тулд хайрт минь.`

            ];



            const triggerBurst = () => {

                const burst = [];

                for (let i = 0; i < 40; i++) {

                    const angle = (i / 40) * Math.PI * 2;

                    const speed = 4 + Math.random() * 8;

                    burst.push({

                        id: Math.random(), x: window.innerWidth / 2, y: window.innerHeight / 2,

                        vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed,

                        size: 2 + Math.random() * 5, color: i % 2 === 0 ? '#fb7185' : '#e11d48',

                        life: 1.0,

                    });

                }

                setParticles(prev => [...prev, ...burst]);

            };



            const loop = (time) => {

                const deltaTime = time - lastTimeRef.current;

                lastTimeRef.current = time;

                const state = sealStateRef.current;



                if (state.holding && !isCompleted) {

                    state.progress = Math.min(100, state.progress + (deltaTime * 0.08));

                    setHoldProgress(state.progress);

                    if (state.progress >= 100) {

                        setIsCompleted(true);

                        triggerBurst();

                        setTimeout(() => {

                            setIsSealPopped(true);

                            state.vx = (Math.random() - 0.5) * 20; state.vy = -30;

                            state.torque = (Math.random() - 0.5) * 50;

                        }, 150);

                    }

                } else if (!isCompleted) {

                    state.progress = Math.max(0, state.progress - (deltaTime * 0.15));

                    setHoldProgress(state.progress);

                }



                if (isSealPopped && sealElementRef.current) {

                    state.vy += 0.9; state.vx *= 0.98; state.torque *= 0.98;

                    state.x += state.vx; state.y += state.vy; state.rotation += state.torque;

                    sealElementRef.current.style.transform = `translate3d(calc(-50% + ${state.x}px), calc(-50% + ${state.y}px), 0) rotate(${state.rotation}deg)`;

                    if (!isOpen && state.y > 400) setIsOpen(true);

                }



                setParticles(prev => prev.map(p => ({ ...p, x: p.x + p.vx, y: p.y + p.vy, life: p.life - 0.02 })).filter(p => p.life > 0));

                physicsRef.current = requestAnimationFrame(loop);

            };



            useEffect(() => {

                physicsRef.current = requestAnimationFrame(loop);

                return () => cancelAnimationFrame(physicsRef.current);

            }, [isCompleted, isSealPopped, isOpen]);



            useEffect(() => {

                if (isOpen) {

                    setTimeout(() => setShowLetter(true), 600);

                    setTimeout(() => setIsSettled(true), 2800);

                }

            }, [isOpen]);



            const handleStart = () => {

                if (isCompleted || isSealPopped) return;

                sealStateRef.current.holding = true;

            };



            const handleEnd = () => {

                sealStateRef.current.holding = false;

            };



            const radius = 45;

            const circumference = 2 * Math.PI * radius;

            const strokeDashoffset = circumference - (holdProgress / 100) * circumference;



            const HeartIcon = (props) => h('svg', {

                viewBox: '0 0 24 24', fill: props.fill || 'none', stroke: 'currentColor',

                strokeWidth: '2', className: props.className, style: { width: props.size, height: props.size }

            }, [h('path', { d: 'M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z' })]);



            return h('div', { className: 'fixed inset-0 flex items-center justify-center' }, [

                // Particles

                h('div', { key: 'particles', className: 'fixed inset-0 pointer-events-none z-[500]' },

                    particles.map(p => h('div', {

                        key: p.id,

                        className: 'absolute rounded-full',

                        style: {

                            width: `${p.size}px`, height: `${p.size}px`,

                            left: `${p.x}px`, top: `${p.y}px`,

                            backgroundColor: p.color, opacity: p.life,

                            transform: `translate(-50%, -50%) scale(${p.life})`

                        }

                    }))

                ),



                // Envelope

                h('div', {

                    key: 'envelope',

                    className: `relative w-[340px] md:w-[500px] h-[240px] md:h-[350px] transition-all duration-1000 z-30 flex items-center justify-center ${!isSealPopped ? 'animate-soft-wiggle' : ''} ${isOpen ? 'translate-y-[280px] md:translate-y-[350px] scale-[0.85]' : 'scale-100'}`

                }, [

                    // Letter Sheet (Slides out)

                    showLetter && h('div', {

                        className: `absolute left-1/2 -translate-x-1/2 bg-[#fdfcf9] paper-texture w-[90%] md:w-[94%] h-[500px] md:h-[650px] z-[5] flex flex-col letter-reveal p-8 md:p-12 overflow-hidden shadow-2xl rounded-sm`,

                        style: {

                            transform: `translate(-50%, ${isOpen ? '-85%' : '0'})`,

                            opacity: isOpen ? 1 : 0

                        }

                    }, [

                        h('div', { className: 'flex-1 overflow-y-auto custom-scrollbar pr-2' },

                            letterContent.map((text, i) => h('p', { key: i, className: 'text-stone-800 leading-relaxed text-lg italic mb-6 indent-8 text-justify whitespace-pre-line' }, text))

                        ),

                        h('div', { className: 'mt-6 pt-6 border-t border-stone-200 flex justify-center opacity-50' },

                            h(HeartIcon, { size: 24, fill: '#fb7185', className: 'text-[#fb7185]' })

                        )

                    ]),



                    // Envelope Body

                    h('div', { className: 'absolute inset-0 bg-gradient-to-br from-[#8b1e1e] to-[#630a0a] rounded-sm border border-[#4a0d18] z-20 overflow-hidden shadow-2xl' }, [

                        h('div', { className: 'absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay', style: { backgroundImage: "url('https://www.transparenttextures.com/patterns/paper-fibers.png')" } }),

                        h('div', { className: 'absolute inset-0 bg-[#7a1515] z-10', style: { clipPath: 'polygon(0% 0%, 50% 55%, 100% 0%, 100% 100%, 0% 100%)' } }),

                        h('div', {

                            className: 'absolute top-0 w-full h-[60%] bg-[#9c2525] border-b border-black/20 transition-transform duration-[1.2s] ease-in-out',

                            style: {

                                clipPath: 'polygon(0% 0%, 100% 0%, 50% 100%)',

                                transform: isOpen ? 'rotateX(180deg)' : 'rotateX(0deg)',

                                zIndex: isOpen ? 5 : 40,

                                transformOrigin: 'top'

                            }

                        })

                    ]),



                    // Wax Seal

                    h('div', {

                        ref: sealElementRef,

                        onMouseDown: handleStart, onTouchStart: handleStart,

                        onMouseUp: handleEnd, onTouchEnd: handleEnd, onMouseLeave: handleEnd,

                        className: `absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[110] transition-transform duration-500 no-tap-highlight ${!isSealPopped ? 'scale-100 cursor-pointer active:scale-95' : 'pointer-events-none'}`

                    }, h('div', { className: 'relative w-24 h-24 md:w-28 md:h-28 flex items-center justify-center' }, [

                        holdProgress > 0 && !isCompleted && h('svg', { className: 'absolute inset-0 w-full h-full -rotate-90 scale-110 overflow-visible pointer-events-none' }, [

                            h('circle', { cx: '50%', cy: '50%', r: radius, fill: 'transparent', stroke: 'rgba(251, 113, 133, 0.2)', strokeWidth: '4' }),

                            h('circle', { cx: '50%', cy: '50%', r: radius, fill: 'transparent', stroke: '#fb7185', strokeWidth: '4', strokeDasharray: circumference, strokeDashoffset, className: 'progress-ring', strokeLinecap: 'round' })

                        ]),

                        h('div', { className: 'relative w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-[#fb7185] to-[#be123c] rounded-full flex items-center justify-center shadow-xl border-4 border-[#9f1239]/30' },

                            h(HeartIcon, { size: '32px', fill: '#4c0519', className: 'text-[#4c0519] opacity-40' })

                        )

                    ]))

                ]),



                !isCompleted && h('div', { className: 'fixed bottom-12 text-stone-500 text-[11px] tracking-[0.5em] uppercase opacity-60 animate-pulse select-none pointer-events-none' }, 'Hold seal to unlock')

            ]);

        };



        const root = ReactDOM.createRoot(document.getElementById('root'));

        root.render(h(App));

    </script>

</body>

</html>
